(function(e,t,n){function r(e){return"[object Function]"==d.call(e)}function i(e){return"string"==typeof e}function s(){}function o(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function u(){var e=v.shift();m=1,e?e.t?h(function(){("c"==e.t?k.injectCss:k.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),u()):m=0}function a(e,n,r,i,s,a,f){function l(t){if(!d&&o(c.readyState)&&(w.r=d=1,!m&&u(),c.onload=c.onreadystatechange=null,t)){"img"!=e&&h(function(){b.removeChild(c)},50);for(var r in T[n])T[n].hasOwnProperty(r)&&T[n][r].onload()}}var f=f||k.errorTimeout,c=t.createElement(e),d=0,g=0,w={t:r,s:n,e:s,a:a,x:f};1===T[n]&&(g=1,T[n]=[]),"object"==e?c.data=n:(c.src=n,c.type=e),c.width=c.height="0",c.onerror=c.onload=c.onreadystatechange=function(){l.call(this,g)},v.splice(i,0,w),"img"!=e&&(g||2===T[n]?(b.insertBefore(c,y?null:p),h(l,f)):T[n].push(c))}function f(e,t,n,r,s){return m=0,t=t||"j",i(e)?a("c"==t?E:w,e,t,this.i++,n,r,s):(v.splice(this.i++,0,e),1==v.length&&u()),this}function l(){var e=k;return e.loader={load:f,i:0},e}var c=t.documentElement,h=e.setTimeout,p=t.getElementsByTagName("script")[0],d={}.toString,v=[],m=0,g="MozAppearance"in c.style,y=g&&!!t.createRange().compareNode,b=y?c:p.parentNode,c=e.opera&&"[object Opera]"==d.call(e.opera),c=!!t.attachEvent&&!c,w=g?"object":c?"script":"img",E=c?"script":w,S=Array.isArray||function(e){return"[object Array]"==d.call(e)},x=[],T={},N={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}},C,k;k=function(e){function t(e){var e=e.split("!"),t=x.length,n=e.pop(),r=e.length,n={url:n,origUrl:n,prefixes:e},i,s,o;for(s=0;s<r;s++)o=e[s].split("="),(i=N[o.shift()])&&(n=i(n,o));for(s=0;s<t;s++)n=x[s](n);return n}function o(e,i,s,o,u){var a=t(e),f=a.autoCallback;a.url.split(".").pop().split("?").shift(),a.bypass||(i&&(i=r(i)?i:i[e]||i[o]||i[e.split("/").pop().split("?")[0]]),a.instead?a.instead(e,i,s,o,u):(T[a.url]?a.noexec=!0:T[a.url]=1,s.load(a.url,a.forceCSS||!a.forceJS&&"css"==a.url.split(".").pop().split("?").shift()?"c":n,a.noexec,a.attrs,a.timeout),(r(i)||r(f))&&s.load(function(){l(),i&&i(a.origUrl,u,o),f&&f(a.origUrl,u,o),T[a.url]=2})))}function u(e,t){function n(e,n){if(e){if(i(e))n||(f=function(){var e=[].slice.call(arguments);l.apply(this,e),c()}),o(e,f,t,0,u);else if(Object(e)===e)for(p in h=function(){var t=0,n;for(n in e)e.hasOwnProperty(n)&&t++;return t}(),e)e.hasOwnProperty(p)&&(!n&&!--h&&(r(f)?f=function(){var e=[].slice.call(arguments);l.apply(this,e),c()}:f[p]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),c()}}(l[p])),o(e[p],f,t,p,u))}else!n&&c()}var u=!!e.test,a=e.load||e.both,f=e.callback||s,l=f,c=e.complete||s,h,p;n(u?e.yep:e.nope,!!a),a&&n(a)}var a,f,c=this.yepnope.loader;if(i(e))o(e,0,c,0);else if(S(e))for(a=0;a<e.length;a++)f=e[a],i(f)?o(f,0,c,0):S(f)?k(f):Object(f)===f&&u(f,c);else Object(e)===e&&u(e,c)},k.addPrefix=function(e,t){N[e]=t},k.addFilter=function(e){x.push(e)},k.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",C=function(){t.removeEventListener("DOMContentLoaded",C,0),t.readyState="complete"},0)),e.yepnope=l(),e.yepnope.executeStack=u,e.yepnope.injectJs=function(e,n,r,i,a,f){var l=t.createElement("script"),c,d,i=i||k.errorTimeout;l.src=e;for(d in r)l.setAttribute(d,r[d]);n=f?u:n||s,l.onreadystatechange=l.onload=function(){!c&&o(l.readyState)&&(c=1,n(),l.onload=l.onreadystatechange=null)},h(function(){c||(c=1,n(1))},i),a?l.onload():p.parentNode.insertBefore(l,p)},e.yepnope.injectCss=function(e,n,r,i,o,a){var i=t.createElement("link"),f,n=a?u:n||s;i.href=e,i.rel="stylesheet",i.type="text/css";for(f in r)i.setAttribute(f,r[f]);o||(p.parentNode.insertBefore(i,p),h(n,0))}})(this,document);(function(e){"use strict";var t="",n="";var r={en:{days:"days",day:"day",hours:"hours",min:"min",price:"Estimate",time:"Time left",bids:"Bids",bid:"Bid",noObjectsFound:"No items were found",heading:"Ending soon",popularItems:"Recently bid on",lastestItems:"Recently added",endingSoon:"Ending soon",seeAll:"See all"},de:{days:"Tage",day:"Tag",hours:"Stunden",min:"Min.",price:"Schätzwert",time:"Restzeit",bids:"Gebote",bid:"Gebot",noObjectsFound:"Keine Artikel wurde gefunden",heading:"Bald endend",popularItems:"Beliebte Artikel",lastestItems:"Neueste Artikel",endingSoon:"Bald endend",seeAll:"Alle ansehen"},sv:{days:"dagar",day:"dag",hours:"timmar",min:"minuter",price:"Utropspris",time:"Tid kvar",bids:"Bud",bid:"Bud",noObjectsFound:"Inga föremål hittades",heading:"Slutar snart",popularItems:"Senaste bud",lastestItems:"Senast inkommet",endingSoon:"Slutar snart",seeAll:"Se alla"}};e.auctionet={defaults:{companyId:null,heading:null,backgroundColors:{image:"#ececec",meta:"#ececec"},textColors:{itemId:"#000",link:"#252525",heading:"#000",bidOrEstimateText:"#5d5d5d",bidOrEstimateValue:"#5d5d5d",endsInText:"#5d5d5d",endsAtValue:"#5d5d5d"},locale:"sv",howManyItems:5,initialFilter:"bid_on"},init:function(r){var i=this;yepnope([{test:e.jQuery,nope:"//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.0/jquery.min.js"},{test:e._,nope:"//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.2/underscore-min.js"},{test:e.Hogan,nope:"//twitter.github.com/hogan.js/builds/2.0.0/hogan-2.0.0.min.js",complete:function(){jQuery(function(){t=jQuery("#auctionet-embedScript"),n=t.data("host");i.embed(r);yepnope([{load:[n+"/css/auctionet-embed.1.0.6.min.css","//fonts.googleapis.com/css?family=Open+Sans:300italic,300,600.css"]}])})}}])},embed:function(t){var i=e.document,s=jQuery;this.settings=_.defaults(t,this.defaults);this.setHeading();var o={url:this.linkUrl(),textColors:this.settings.textColors,text:r[this.settings.locale],heading:this.settings.heading,host:n,linkUrl:this.linkUrl()};var u=this.wrapperTemplate().render(o);s("#auctionet-embed").after(u);s("#auctionet-buttons a:not(.all)").click(_.bind(this.onClickObjectButton,this));s("#auctionet-buttons a[rel="+this.settings.initialFilter+"]").trigger("click");this.externalItems=s("#external-items");this.loadExternalItems(this.settings.initialFilter)},setHeading:function(){if(this.settings.heading===null){this.settings.heading=r[this.settings.locale].heading}else{return}},timeDifference:function(e,t){var n=1e3*60*60*24,i=1e3*60*60,s=1e3*60,o=e.getTime(),u=t.getTime(),a=Math.abs(o-u),f="";if(a/n<1){if(a>i){f=Math.round(a/i)+" "+r[this.settings.locale].hour}else{f=Math.round(a/s)+r[this.settings.locale].min}}else{f=Math.round(a/n)+(Math.round(a/n)===1?" "+r[this.settings.locale].day:" "+r[this.settings.locale].days)}return f},drawItem:function(e){var t={id:e.id,title:this.truncateItemTitle(e.title),itemLinkUrl:e.url,imageUrl:e.images[0].thumb,bidOrEstimateText:this.bidOrEstimateText(e),bidOrEstimateValue:this.bidOrEstimateValue(e),endsInText:r[this.settings.locale].time,endsInValue:this.timeDifference(new Date,new Date(e.ends_at*1e3)),textColors:this.settings.textColors,backgroundColors:this.settings.backgroundColors};return this.itemTemplate().render(t)},itemTemplate:function(){var e='<li><div class="object-image" style="background-color: {{backgroundColors.image}}"><a href="{{itemLinkUrl}}"><img src="{{imageUrl}}" alt="{{title}}" /></a></div><a class="object-link" href="{{itemLinkUrl}}" style="color: {{textColors.link}}"><strong style="color: {{textColors.itemId}}">{{id}}.</strong> {{title}}</a><dl style="background-color: {{backgroundColors.meta}}"><dt class="border" style="color: {{textColors.bidOrEstimateText}}">{{bidOrEstimateText}}</dt><dd class="border" style="color: {{textColors.bidOrEstimateValue}}">{{bidOrEstimateValue}}</dd><dt style="color: {{textColors.endsInText}}">{{endsInText}}</dt><dd style="color: {{textColors.endsAtValue}}">{{endsInValue}}</dd></dl></li>';var t=Hogan.compile(e);return t},wrapperTemplate:function(){var e='<div id="auctionet-wrapper"><div id="auctionet-header"><h2 style="color: {{textColors.heading}}">{{heading}}</h2><a href="{{linkUrl}}"><img src="{{host}}/img/logo.png" width="300" height="42" /></a></div><ul id="external-items"></ul><div id="auctionet-buttons"><a href="javascript:void(0)" rel="bid_on" class="objects-btn active">{{text.popularItems}}</a><a href="javascript:void(0)" rel="recent" class="objects-btn">{{text.lastestItems}}</a><a href="javascript:void(0)" rel="ending" class="objects-btn">{{text.endingSoon}}</a><span class="button-divider"> | </span><a href="{{url}}" class="objects-btn all">{{text.seeAll}}</a></div></div></div>';var t=Hogan.compile(e);return t},truncateItemTitle:function(e){return e.length>36?e.substring(0,36)+"...":e},bidOrEstimateValue:function(e){if(e.bids.length>0){return e.bids[0].amount+" "+e.currency}else{return e.estimate+" "+e.currency}},bidOrEstimateText:function(e){var t=e.bids.length;var n=t>1?r[this.settings.locale].bids:r[this.settings.locale].bid;if(t>0){return t+" "+n}else{return r[this.settings.locale].price}},displayNoItemsFound:function(e){var t="<li><h4>"+r[this.settings.locale].noObjectsFound+"</h4></li>";this.externalItems.html(t)},displayExternalItems:function(e){var t="";_.each(e,_.bind(function(n,r,i){t+=this.drawItem(e[r])},this));this.externalItems.html(t)},loadedItems:function(e){if(e&&e.items){this.displayExternalItems(e.items)}},apiUrl:function(e){return"https://auctionet.com/api/v2/items.json?locale="+this.settings.locale+"&company_id="+this.settings.companyId+"&order="+e+"&per_page="+this.settings.howManyItems},linkUrl:function(){return"https://auctionet.com/"+this.settings.locale+"/search?company_id="+this.settings.companyId},loadExternalItems:function(e){$.ajax({url:this.apiUrl(e),dataType:"jsonp",success:_.bind(this.loadedItems,this),error:this.displayNoItemsFound})},onClickObjectButton:function(e){e.preventDefault();var t=$(e.target),n=t.attr("rel");t.addClass("active");t.siblings(":not(.all)").removeClass("active");this.loadExternalItems(n)}}})(window)